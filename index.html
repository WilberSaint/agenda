<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Agenda Personal Pro</title>
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#334155">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Agenda Pro">
    
    <!-- iOS Icons -->
    <link rel="apple-touch-icon" href="assets/icons/icon-180.png">
    <link rel="apple-touch-icon" sizes="152x152" href="assets/icons/icon-152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/icon-180.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/icons/favicon-16x16.png">
    
    <!-- CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="css/base.css" rel="stylesheet">
    <link href="css/habits.css" rel="stylesheet">
    <link href="css/gym.css" rel="stylesheet">
    <link href="css/goals.css" rel="stylesheet">
    <link id="theme-css" href="css/themes/masculine.css" rel="stylesheet">
    <link href="css/responsive.css" rel="stylesheet">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h3>Cargando Agenda...</h3>
            <p>Preparando tu espacio de productividad</p>
        </div>
    </div>

    <div class="app-container" id="app-container" style="display: none;">
        <!-- Header Principal -->
        <header class="app-header gradient-header text-white py-3">
            <div class="container-fluid">
                <div class="row align-items-center">
                    <div class="col-auto d-lg-none">
                        <button class="btn btn-link text-white p-0" id="mobile-menu-toggle">
                            <i class="fas fa-bars fa-lg"></i>
                        </button>
                    </div>
                    <div class="col text-center col-lg-auto text-lg-start">
                        <h1 class="mb-0">
                            <i class="fas fa-calendar-alt me-2"></i>
                            <span class="d-none d-sm-inline">Agenda Personal Pro</span>
                            <span class="d-inline d-sm-none">Agenda Pro</span>
                        </h1>
                    </div>
                    <div class="col-auto">
                        <!-- Theme Selector -->
                        <div class="dropdown">
                            <button class="btn btn-outline-light btn-sm dropdown-toggle" type="button" id="themeDropdown" data-bs-toggle="dropdown">
                                <i class="fas fa-palette me-1"></i>
                                <span class="d-none d-sm-inline">Tema</span>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li>
                                    <a class="dropdown-item" href="#" onclick="ThemeManager.switch('masculine')">
                                        <i class="fas fa-briefcase me-2"></i>Profesional
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="#" onclick="ThemeManager.switch('feminine')">
                                        <i class="fas fa-heart me-2"></i>Elegante
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation Sidebar -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-content">
                <ul class="nav nav-pills flex-column">
                    <li class="nav-item">
                        <a class="nav-link active" href="#" data-module="agenda">
                            <i class="fas fa-calendar-check me-2"></i>
                            <span>Agenda</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-module="habits">
                            <i class="fas fa-repeat me-2"></i>
                            <span>H√°bitos</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" href="#" data-module="goals">
                            <i class="fas fa-bullseye me-2"></i>
                            <span>Metas</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" href="#" data-module="gym">
                            <i class="fas fa-dumbbell me-2"></i>
                            <span>Gimnasio</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" href="#" data-module="dashboard">
                            <i class="fas fa-chart-line me-2"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                </ul>

                <!-- Sidebar Footer -->
                <div class="sidebar-footer mt-auto pt-3">
                    <div class="text-center">
                        <button class="btn btn-outline-primary btn-sm w-100 mb-2" id="install-button" style="display: none;">
                            <i class="fas fa-download me-1"></i>Instalar App
                        </button>
                        <small class="text-muted d-block">
                            <i class="fas fa-shield-alt me-1"></i>
                            Datos seguros en tu dispositivo
                        </small>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Module: Agenda -->
            <div id="module-agenda" class="module-content active">
                <!-- Vista de calendario de 3 d√≠as -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="card app-card shadow-sm">
                            <div class="card-header card-header-primary">
                                <h5 class="mb-0">
                                    <i class="fas fa-calendar-week me-2"></i>
                                    Pr√≥ximos 3 D√≠as
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="row" id="threeDayView">
                                    <!-- Los pr√≥ximos 3 d√≠as se generar√°n aqu√≠ -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <!-- Sidebar para agregar tareas -->
                    <div class="col-lg-4 col-md-5">
                        <div class="card app-card shadow-sm">
                            <div class="card-header card-header-success">
                                <h5 class="mb-0">
                                    <i class="fas fa-plus me-2"></i>
                                    Agregar Nueva Tarea
                                </h5>
                            </div>
                            <div class="card-body">
                                <form id="taskForm">
                                    <div class="mb-3">
                                        <label for="taskTitle" class="form-label">T√≠tulo de la tarea</label>
                                        <input type="text" class="form-control app-input" id="taskTitle" required>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="taskDescription" class="form-label">Descripci√≥n</label>
                                        <textarea class="form-control app-input" id="taskDescription" rows="3"></textarea>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="taskType" class="form-label">Tipo</label>
                                        <select class="form-select app-input" id="taskType">
                                            <option value="pendiente">Pendiente (1 mes)</option>
                                            <option value="recordatorio">Recordatorio</option>
                                            <option value="checklist">Lista de tareas</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="taskCategory" class="form-label">Categor√≠a</label>
                                        <select class="form-select app-input" id="taskCategory">
                                            <option value="personal">Personal</option>
                                            <option value="trabajo">Trabajo</option>
                                            <option value="compras">Compras</option>
                                            <option value="comida">Comida/Mercado</option>
                                            <option value="pagos">Pagos</option>
                                            <option value="citas">Citas/Recordatorios</option>
                                            <option value="otros">Otros</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="taskPriority" class="form-label">Prioridad</label>
                                        <select class="form-select app-input" id="taskPriority">
                                            <option value="baja">Baja</option>
                                            <option value="media" selected>Media</option>
                                            <option value="alta">Alta</option>
                                            <option value="urgente">Urgente</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="taskDate" class="form-label">Fecha</label>
                                        <input type="date" class="form-control app-input" id="taskDate">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="taskTime" class="form-label">Hora (opcional)</label>
                                        <input type="time" class="form-control app-input" id="taskTime">
                                    </div>

                                    <!-- Secci√≥n para Checklist Items -->
                                    <div id="checklistSection" style="display: none;">
                                        <div class="mb-3">
                                            <label class="form-label">Items de la lista</label>
                                            <div id="checklistItems">
                                                <div class="input-group mb-2">
                                                    <input type="text" class="form-control app-input" placeholder="Agregar item...">
                                                    <button type="button" class="btn btn-primary" onclick="agenda.addChecklistItem(this)">
                                                        <i class="fas fa-plus"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <button type="submit" class="btn btn-gradient w-100">
                                        <i class="fas fa-save me-2"></i>
                                        Guardar Tarea
                                    </button>
                                </form>
                            </div>
                        </div>

                        <!-- Filtros -->
                        <div class="card app-card shadow-sm mt-3">
                            <div class="card-header card-header-info">
                                <h6 class="mb-0">
                                    <i class="fas fa-filter me-2"></i>
                                    Filtros
                                </h6>
                            </div>
                            <div class="card-body">
                                <div class="mb-2">
                                    <select class="form-select form-select-sm app-input" id="filterType">
                                        <option value="">Todos los tipos</option>
                                        <option value="pendiente">Pendientes</option>
                                        <option value="recordatorio">Recordatorios</option>
                                        <option value="checklist">Listas</option>
                                    </select>
                                </div>
                                <div class="mb-2">
                                    <select class="form-select form-select-sm app-input" id="filterCategory">
                                        <option value="">Todas las categor√≠as</option>
                                        <option value="personal">Personal</option>
                                        <option value="trabajo">Trabajo</option>
                                        <option value="compras">Compras</option>
                                        <option value="comida">Comida/Mercado</option>
                                        <option value="pagos">Pagos</option>
                                        <option value="citas">Citas/Recordatorios</option>
                                        <option value="otros">Otros</option>
                                    </select>
                                </div>
                                <div class="mb-2">
                                    <select class="form-select form-select-sm app-input" id="filterPriority">
                                        <option value="">Todas las prioridades</option>
                                        <option value="urgente">Urgente</option>
                                        <option value="alta">Alta</option>
                                        <option value="media">Media</option>
                                        <option value="baja">Baja</option>
                                    </select>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="filterCompleted">
                                    <label class="form-check-label" for="filterCompleted">
                                        Mostrar completadas
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Lista de tareas con pesta√±as -->
                    <div class="col-lg-8 col-md-7">
                        <div class="card app-card shadow-sm">
                            <div class="card-header card-header-warning">
                                <ul class="nav nav-tabs card-header-tabs" id="taskTabs" role="tablist">
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link active app-tab" id="all-tab" data-bs-toggle="tab" data-bs-target="#all-tasks" type="button" role="tab">
                                            <i class="fas fa-list me-1"></i>
                                            <span class="d-none d-sm-inline">Todas</span>
                                        </button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link app-tab" id="pending-tab" data-bs-toggle="tab" data-bs-target="#pending-tasks" type="button" role="tab">
                                            <i class="fas fa-clock me-1"></i>
                                            <span class="d-none d-sm-inline">Pendientes</span>
                                        </button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link app-tab" id="checklist-tab" data-bs-toggle="tab" data-bs-target="#checklist-tasks" type="button" role="tab">
                                            <i class="fas fa-check-square me-1"></i>
                                            <span class="d-none d-sm-inline">Listas</span>
                                        </button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link app-tab" id="reminders-tab" data-bs-toggle="tab" data-bs-target="#reminder-tasks" type="button" role="tab">
                                            <i class="fas fa-bell me-1"></i>
                                            <span class="d-none d-sm-inline">Recordatorios</span>
                                        </button>
                                    </li>
                                </ul>
                                <div class="mt-2 d-flex justify-content-end flex-wrap gap-2">
                                    <button class="btn btn-sm btn-secondary" id="exportToGoogle">
                                        <i class="fab fa-google me-1"></i>
                                        <span class="d-none d-sm-inline">Exportar a Google</span>
                                    </button>
                                    <button class="btn btn-sm btn-danger" id="clearCompleted">
                                        <i class="fas fa-trash me-1"></i>
                                        <span class="d-none d-sm-inline">Limpiar completadas</span>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="card-body">
                                <div id="taskStats" class="alert app-alert border mb-3">
                                    <div class="row text-center">
                                        <div class="col-3">
                                            <div class="stat-number" id="totalTasks">0</div>
                                            <div class="stat-label">Total</div>
                                        </div>
                                        <div class="col-3">
                                            <div class="stat-number text-success" id="completedTasks">0</div>
                                            <div class="stat-label">Completadas</div>
                                        </div>
                                        <div class="col-3">
                                            <div class="stat-number text-warning" id="pendingTasks">0</div>
                                            <div class="stat-label">Pendientes</div>
                                        </div>
                                        <div class="col-3">
                                            <div class="stat-number text-danger" id="urgentTasks">0</div>
                                            <div class="stat-label">Urgentes</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="tab-content" id="taskTabContent">
                                    <div class="tab-pane fade show active" id="all-tasks" role="tabpanel">
                                        <div id="taskList" class="task-container">
                                            <!-- Todas las tareas se mostrar√°n aqu√≠ -->
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="pending-tasks" role="tabpanel">
                                        <div id="pendingList" class="task-container">
                                            <!-- Pendientes se mostrar√°n aqu√≠ -->
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="checklist-tasks" role="tabpanel">
                                        <div id="checklistList" class="task-container">
                                            <!-- Listas se mostrar√°n aqu√≠ -->
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="reminder-tasks" role="tabpanel">
                                        <div id="reminderList" class="task-container">
                                            <!-- Recordatorios se mostrar√°n aqu√≠ -->
                                        </div>
                                    </div>
                                </div>
                                
                                <div id="emptyState" class="text-center py-5 text-muted" style="display: none;">
                                    <i class="fas fa-tasks fa-3x mb-3 text-primary"></i>
                                    <h5>No hay tareas a√∫n</h5>
                                    <p>Agrega tu primera tarea para comenzar</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

<!-- Module: H√°bitos -->
<div id="module-habits" class="module-content">
    <!-- Vista de progreso de hoy -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card app-card shadow-sm">
                <div class="card-header card-header-primary">
                    <h5 class="mb-0">
                        <i class="fas fa-calendar-day me-2"></i>
                        Progreso de Hoy
                    </h5>
                </div>
                <div class="card-body">
                    <div id="todayHabitsProgress">
                        <!-- El progreso de hoy se generar√° aqu√≠ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Sidebar para agregar h√°bitos -->
        <div class="col-lg-4 col-md-5">
            <div class="card app-card shadow-sm">
                <div class="card-header card-header-success">
                    <h5 class="mb-0">
                        <i class="fas fa-plus me-2"></i>
                        Crear Nuevo H√°bito
                    </h5>
                </div>
                <div class="card-body">
                    <form id="habitForm">
                        <div class="mb-3">
                            <label for="habitName" class="form-label">Nombre del h√°bito</label>
                            <input type="text" class="form-control app-input" id="habitName" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="habitDescription" class="form-label">Descripci√≥n</label>
                            <textarea class="form-control app-input" id="habitDescription" rows="2"></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label for="habitCategory" class="form-label">Categor√≠a</label>
                            <select class="form-select app-input" id="habitCategory">
                                <option value="health">Salud</option>
                                <option value="fitness">Fitness</option>
                                <option value="productivity">Productividad</option>
                                <option value="learning">Aprendizaje</option>
                                <option value="social">Social</option>
                                <option value="spiritual">Espiritual</option>
                                <option value="creative">Creativo</option>
                                <option value="financial">Financiero</option>
                                <option value="other">Otro</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label for="habitDifficulty" class="form-label">Dificultad</label>
                            <select class="form-select app-input" id="habitDifficulty">
                                <option value="easy">F√°cil</option>
                                <option value="medium" selected>Medio</option>
                                <option value="hard">Dif√≠cil</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label for="habitFrequency" class="form-label">Frecuencia</label>
                            <select class="form-select app-input" id="habitFrequency">
                                <option value="daily" selected>Diario</option>
                                <option value="weekly">Semanal</option>
                                <option value="workdays">D√≠as laborales</option>
                                <option value="weekends">Fines de semana</option>
                            </select>
                        </div>
                        
                        <div class="row">
                            <div class="col-8">
                                <label for="habitTargetValue" class="form-label">Meta diaria</label>
                                <input type="number" class="form-control app-input" id="habitTargetValue" min="1" value="1">
                            </div>
                            <div class="col-4">
                                <label for="habitUnit" class="form-label">Unidad</label>
                                <input type="text" class="form-control app-input" id="habitUnit" value="veces">
                            </div>
                        </div>
                        
                        <div class="row mt-3">
                            <div class="col-6">
                                <label for="habitIcon" class="form-label">√çcono</label>
                                <select class="form-select app-input" id="habitIcon">
                                    <option value="fas fa-star">‚≠ê Estrella</option>
                                    <option value="fas fa-heart">‚ù§Ô∏è Coraz√≥n</option>
                                    <option value="fas fa-fire">üî• Fuego</option>
                                    <option value="fas fa-dumbbell">üèãÔ∏è Ejercicio</option>
                                    <option value="fas fa-book">üìö Lectura</option>
                                    <option value="fas fa-glass-water">üíß Agua</option>
                                    <option value="fas fa-bed">üõèÔ∏è Dormir</option>
                                    <option value="fas fa-utensils">üçΩÔ∏è Comida</option>
                                    <option value="fas fa-brain">üß† Mental</option>
                                    <option value="fas fa-leaf">üå± Naturaleza</option>
                                </select>
                            </div>
                            <div class="col-6">
                                <label for="habitColor" class="form-label">Color</label>
                                <input type="color" class="form-control app-input" id="habitColor" value="#60a5fa">
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-gradient w-100 mt-3">
                            <i class="fas fa-save me-2"></i>
                            Crear H√°bito
                        </button>
                    </form>
                </div>
            </div>

            <!-- Filtros -->
            <div class="card app-card shadow-sm mt-3">
                <div class="card-header card-header-info">
                    <h6 class="mb-0">
                        <i class="fas fa-filter me-2"></i>
                        Filtros
                    </h6>
                </div>
                <div class="card-body">
                    <div class="mb-2">
                        <select class="form-select form-select-sm app-input" id="filterHabitCategory">
                            <option value="">Todas las categor√≠as</option>
                            <option value="health">Salud</option>
                            <option value="fitness">Fitness</option>
                            <option value="productivity">Productividad</option>
                            <option value="learning">Aprendizaje</option>
                            <option value="social">Social</option>
                            <option value="spiritual">Espiritual</option>
                            <option value="creative">Creativo</option>
                            <option value="financial">Financiero</option>
                            <option value="other">Otro</option>
                        </select>
                    </div>
                    <div class="mb-2">
                        <select class="form-select form-select-sm app-input" id="filterHabitDifficulty">
                            <option value="">Todas las dificultades</option>
                            <option value="easy">F√°cil</option>
                            <option value="medium">Medio</option>
                            <option value="hard">Dif√≠cil</option>
                        </select>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="filterArchivedHabits">
                        <label class="form-check-label" for="filterArchivedHabits">
                            Mostrar archivados
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lista de h√°bitos -->
        <div class="col-lg-8 col-md-7">
            <div class="card app-card shadow-sm">
                <div class="card-header card-header-warning">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">
                            <i class="fas fa-list me-2"></i>
                            Mis H√°bitos
                        </h5>
                        <div class="d-flex gap-2">
                            <button class="btn btn-sm btn-secondary" id="archiveCompletedHabits">
                                <i class="fas fa-archive me-1"></i>
                                <span class="d-none d-sm-inline">Archivar completados</span>
                            </button>
                            <button class="btn btn-sm btn-info" id="exportHabits">
                                <i class="fas fa-download me-1"></i>
                                <span class="d-none d-sm-inline">Exportar</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="card-body">
                    <div id="habitStats" class="alert app-alert border mb-3">
                        <div class="row text-center">
                            <div class="col-3">
                                <div class="stat-number" id="totalHabits">0</div>
                                <div class="stat-label">Total</div>
                            </div>
                            <div class="col-3">
                                <div class="stat-number text-success" id="todayCompletedHabits">0</div>
                                <div class="stat-label">Hoy Completados</div>
                            </div>
                            <div class="col-3">
                                <div class="stat-number text-warning" id="todayPendingHabits">0</div>
                                <div class="stat-label">Pendientes</div>
                            </div>
                            <div class="col-3">
                                <div class="stat-number text-info" id="averageStreak">0</div>
                                <div class="stat-label">Racha Promedio</div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="habitsList" class="habits-container">
                        <!-- Los h√°bitos se mostrar√°n aqu√≠ -->
                    </div>
                    
                    <div id="emptyHabitsState" class="text-center py-5 text-muted" style="display: none;">
                        <i class="fas fa-repeat fa-3x mb-3 text-primary"></i>
                        <h5>No hay h√°bitos a√∫n</h5>
                        <p>Crea tu primer h√°bito para comenzar a construir una rutina positiva</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal para editar h√°bito -->
<div class="modal fade" id="editHabitModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content app-modal">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="fas fa-edit me-2"></i>
                    Editar H√°bito
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="editHabitForm">
                    <input type="hidden" id="editHabitId">
                    <div class="mb-3">
                        <label for="editHabitName" class="form-label">Nombre</label>
                        <input type="text" class="form-control app-input" id="editHabitName" required>
                    </div>
                    <div class="mb-3">
                        <label for="editHabitDescription" class="form-label">Descripci√≥n</label>
                        <textarea class="form-control app-input" id="editHabitDescription" rows="2"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="editHabitCategory" class="form-label">Categor√≠a</label>
                        <select class="form-select app-input" id="editHabitCategory">
                            <option value="health">Salud</option>
                            <option value="fitness">Fitness</option>
                            <option value="productivity">Productividad</option>
                            <option value="learning">Aprendizaje</option>
                            <option value="social">Social</option>
                            <option value="spiritual">Espiritual</option>
                            <option value="creative">Creativo</option>
                            <option value="financial">Financiero</option>
                            <option value="other">Otro</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="editHabitDifficulty" class="form-label">Dificultad</label>
                        <select class="form-select app-input" id="editHabitDifficulty">
                            <option value="easy">F√°cil</option>
                            <option value="medium">Medio</option>
                            <option value="hard">Dif√≠cil</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="editHabitFrequency" class="form-label">Frecuencia</label>
                        <select class="form-select app-input" id="editHabitFrequency">
                            <option value="daily">Diario</option>
                            <option value="weekly">Semanal</option>
                            <option value="workdays">D√≠as laborales</option>
                            <option value="weekends">Fines de semana</option>
                        </select>
                    </div>
                    <div class="row">
                        <div class="col-8">
                            <label for="editHabitTargetValue" class="form-label">Meta diaria</label>
                            <input type="number" class="form-control app-input" id="editHabitTargetValue" min="1">
                        </div>
                        <div class="col-4">
                            <label for="editHabitUnit" class="form-label">Unidad</label>
                            <input type="text" class="form-control app-input" id="editHabitUnit">
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-6">
                            <label for="editHabitIcon" class="form-label">√çcono</label>
                            <select class="form-select app-input" id="editHabitIcon">
                                <option value="fas fa-star">‚≠ê Estrella</option>
                                <option value="fas fa-heart">‚ù§Ô∏è Coraz√≥n</option>
                                <option value="fas fa-fire">üî• Fuego</option>
                                <option value="fas fa-dumbbell">üèãÔ∏è Ejercicio</option>
                                <option value="fas fa-book">üìö Lectura</option>
                                <option value="fas fa-glass-water">üíß Agua</option>
                                <option value="fas fa-bed">üõèÔ∏è Dormir</option>
                                <option value="fas fa-utensils">üçΩÔ∏è Comida</option>
                                <option value="fas fa-brain">üß† Mental</option>
                                <option value="fas fa-leaf">üå± Naturaleza</option>
                            </select>
                        </div>
                        <div class="col-6">
                            <label for="editHabitColor" class="form-label">Color</label>
                            <input type="color" class="form-control app-input" id="editHabitColor">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-gradient" id="saveEditHabit">
                    <i class="fas fa-save me-1"></i>
                    Guardar Cambios
                </button>
            </div>
        </div>
    </div>
</div>


<!-- Module: Metas -->
<div id="module-goals" class="module-content">
    <!-- Vista de resumen de metas -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card app-card shadow-sm">
                <div class="card-header card-header-primary">
                    <h5 class="mb-0">
                        <i class="fas fa-target me-2"></i>
                        Resumen de Metas
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div id="urgentGoalsSummary">
                                <!-- Metas urgentes se generar√°n aqu√≠ -->
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div id="recentMilestonesSummary">
                                <!-- Milestones recientes se generar√°n aqu√≠ -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Sidebar para formularios -->
        <div class="col-lg-4 col-md-5">
            <!-- Pesta√±as para formularios -->
            <div class="card app-card shadow-sm">
                <div class="card-header card-header-success">
                    <ul class="nav nav-pills card-header-tabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="goal-form-tab" data-bs-toggle="tab" data-bs-target="#goal-form" type="button" role="tab">
                                <i class="fas fa-bullseye me-1"></i>
                                <span class="d-none d-sm-inline">Meta</span>
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="milestone-form-tab" data-bs-toggle="tab" data-bs-target="#milestone-form" type="button" role="tab">
                                <i class="fas fa-flag-checkered me-1"></i>
                                <span class="d-none d-sm-inline">Milestone</span>
                            </button>
                        </li>
                    </ul>
                </div>
                
                <div class="card-body">
                    <div class="tab-content">
                        <!-- Formulario de metas -->
                        <div class="tab-pane fade show active" id="goal-form" role="tabpanel">
                            <h6 class="mb-3">
                                <i class="fas fa-plus me-2"></i>
                                Nueva Meta
                            </h6>
                            <form id="goalForm">
                                <div class="mb-3">
                                    <label for="goalTitle" class="form-label required">T√≠tulo de la meta</label>
                                    <input type="text" class="form-control app-input" id="goalTitle" required
                                           placeholder="Ej: Aprender franc√©s, Correr 5km...">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="goalDescription" class="form-label">Descripci√≥n</label>
                                    <textarea class="form-control app-input" id="goalDescription" rows="2"
                                              placeholder="Describe tu meta en detalle..."></textarea>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="goalType" class="form-label required">Tipo de meta</label>
                                    <select class="form-select app-input" id="goalType" required>
                                        <option value="">Seleccionar tipo...</option>
                                        <option value="binary">Binaria (S√≠/No)</option>
                                        <option value="quantifiable">Cuantificable (Con progreso num√©rico)</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="goalCategory" class="form-label required">Categor√≠a</label>
                                    <select class="form-select app-input" id="goalCategory" required>
                                        <option value="">Seleccionar categor√≠a...</option>
                                        <option value="personal">Personal</option>
                                        <option value="professional">Profesional</option>
                                        <option value="health">Salud</option>
                                        <option value="financial">Financiero</option>
                                        <option value="education">Educaci√≥n</option>
                                        <option value="relationships">Relaciones</option>
                                        <option value="hobby">Pasatiempos</option>
                                        <option value="travel">Viajes</option>
                                        <option value="other">Otros</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="goalPriority" class="form-label required">Prioridad</label>
                                    <select class="form-select app-input" id="goalPriority" required>
                                        <option value="">Seleccionar prioridad...</option>
                                        <option value="baja">Baja</option>
                                        <option value="media" selected>Media</option>
                                        <option value="alta">Alta</option>
                                        <option value="urgente">Urgente</option>
                                    </select>
                                </div>
                                
                                <div class="row">
                                    <div class="col-6">
                                        <label for="goalStartDate" class="form-label">Fecha de inicio</label>
                                        <input type="date" class="form-control app-input" id="goalStartDate">
                                    </div>
                                    <div class="col-6">
                                        <label for="goalDeadline" class="form-label required">Fecha l√≠mite</label>
                                        <input type="date" class="form-control app-input" id="goalDeadline" required>
                                    </div>
                                </div>
                                
                                <!-- Secci√≥n para metas cuantificables -->
                                <div id="quantifiableSection" style="display: none;">
                                    <div class="row mt-3">
                                        <div class="col-4">
                                            <label for="goalCurrentValue" class="form-label">Valor actual</label>
                                            <input type="number" class="form-control app-input" id="goalCurrentValue" 
                                                   min="0" step="0.1" value="0">
                                        </div>
                                        <div class="col-4">
                                            <label for="goalTargetValue" class="form-label">Objetivo</label>
                                            <input type="number" class="form-control app-input" id="goalTargetValue" 
                                                   min="0.1" step="0.1">
                                        </div>
                                        <div class="col-4">
                                            <label for="goalUnit" class="form-label">Unidad</label>
                                            <input type="text" class="form-control app-input" id="goalUnit" 
                                                   placeholder="kg, km, hrs...">
                                        </div>
                                    </div>
                                </div>
                                
                                <button type="submit" class="btn btn-gradient w-100 mt-3">
                                    <i class="fas fa-save me-2"></i>
                                    Crear Meta
                                </button>
                            </form>
                        </div>
                        
                        <!-- Formulario de milestones -->
                        <div class="tab-pane fade" id="milestone-form" role="tabpanel">
                            <h6 class="mb-3">
                                <i class="fas fa-plus me-2"></i>
                                Nuevo Milestone
                            </h6>
                            <form id="milestoneForm">
                                <div class="mb-3">
                                    <label for="milestoneGoalSelect" class="form-label required">Seleccionar meta</label>
                                    <select class="form-select app-input" id="milestoneGoalSelect" required>
                                        <option value="">Seleccionar meta...</option>
                                        <!-- Las metas activas se cargar√°n aqu√≠ -->
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="milestoneTitle" class="form-label required">T√≠tulo del milestone</label>
                                    <input type="text" class="form-control app-input" id="milestoneTitle" required
                                           placeholder="Ej: Completar primera semana...">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="milestoneDescription" class="form-label">Descripci√≥n</label>
                                    <textarea class="form-control app-input" id="milestoneDescription" rows="2"
                                              placeholder="Describe este paso intermedio..."></textarea>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="milestoneDeadline" class="form-label">Fecha l√≠mite (opcional)</label>
                                    <input type="date" class="form-control app-input" id="milestoneDeadline">
                                </div>
                                
                                <button type="submit" class="btn btn-gradient w-100">
                                    <i class="fas fa-save me-2"></i>
                                    Agregar Milestone
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Filtros -->
            <div class="card app-card shadow-sm mt-3">
                <div class="card-header card-header-info">
                    <h6 class="mb-0">
                        <i class="fas fa-filter me-2"></i>
                        Filtros
                    </h6>
                </div>
                <div class="card-body">
                    <div class="mb-2">
                        <select class="form-select form-select-sm app-input" id="filterGoalStatus">
                            <option value="">Todos los estados</option>
                            <option value="planning">Planificando</option>
                            <option value="active">Activo</option>
                            <option value="paused">Pausado</option>
                            <option value="completed">Completado</option>
                            <option value="cancelled">Cancelado</option>
                        </select>
                    </div>
                    <div class="mb-2">
                        <select class="form-select form-select-sm app-input" id="filterGoalCategory">
                            <option value="">Todas las categor√≠as</option>
                            <option value="personal">Personal</option>
                            <option value="professional">Profesional</option>
                            <option value="health">Salud</option>
                            <option value="financial">Financiero</option>
                            <option value="education">Educaci√≥n</option>
                            <option value="relationships">Relaciones</option>
                            <option value="hobby">Pasatiempos</option>
                            <option value="travel">Viajes</option>
                            <option value="other">Otros</option>
                        </select>
                    </div>
                    <div class="mb-2">
                        <select class="form-select form-select-sm app-input" id="filterGoalPriority">
                            <option value="">Todas las prioridades</option>
                            <option value="urgente">Urgente</option>
                            <option value="alta">Alta</option>
                            <option value="media">Media</option>
                            <option value="baja">Baja</option>
                        </select>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="filterCompletedGoals">
                        <label class="form-check-label" for="filterCompletedGoals">
                            Mostrar completadas
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lista de metas -->
        <div class="col-lg-8 col-md-7">
            <div class="card app-card shadow-sm">
                <div class="card-header card-header-warning">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">
                            <i class="fas fa-bullseye me-2"></i>
                            Mis Metas
                        </h5>
                        <div class="d-flex gap-2">
                            <button class="btn btn-sm btn-secondary" id="archiveCompletedGoals">
                                <i class="fas fa-archive me-1"></i>
                                <span class="d-none d-sm-inline">Archivar completadas</span>
                            </button>
                            <button class="btn btn-sm btn-info" id="exportGoals">
                                <i class="fas fa-download me-1"></i>
                                <span class="d-none d-sm-inline">Exportar</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="card-body">
                    <div id="goalsStats" class="alert app-alert border mb-3">
                        <div class="row text-center">
                            <div class="col-3">
                                <div class="stat-number" id="totalGoals">0</div>
                                <div class="stat-label">Total</div>
                            </div>
                            <div class="col-3">
                                <div class="stat-number text-primary" id="activeGoals">0</div>
                                <div class="stat-label">Activas</div>
                            </div>
                            <div class="col-3">
                                <div class="stat-number text-success" id="completedGoals">0</div>
                                <div class="stat-label">Completadas</div>
                            </div>
                            <div class="col-3">
                                <div class="stat-number text-danger" id="urgentGoals">0</div>
                                <div class="stat-label">Urgentes</div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="goalsList" class="goals-container">
                        <!-- Las metas se mostrar√°n aqu√≠ -->
                    </div>
                    
                    <div id="emptyGoalsState" class="text-center py-5 text-muted" style="display: none;">
                        <i class="fas fa-bullseye fa-3x mb-3 text-primary"></i>
                        <h5>No hay metas creadas</h5>
                        <p>Crea tu primera meta para comenzar a alcanzar tus objetivos</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal para editar meta -->
<div class="modal fade" id="editGoalModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content app-modal">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="fas fa-edit me-2"></i>
                    Editar Meta
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="editGoalForm">
                    <input type="hidden" id="editGoalId">
                    
                    <div class="mb-3">
                        <label for="editGoalTitle" class="form-label required">T√≠tulo de la meta</label>
                        <input type="text" class="form-control app-input" id="editGoalTitle" required>
                    </div>
                    
                    <div class="mb-3">
                        <label for="editGoalDescription" class="form-label">Descripci√≥n</label>
                        <textarea class="form-control app-input" id="editGoalDescription" rows="2"></textarea>
                    </div>
                    
                    <div class="mb-3">
                        <label for="editGoalType" class="form-label required">Tipo de meta</label>
                        <select class="form-select app-input" id="editGoalType" required>
                            <option value="">Seleccionar tipo...</option>
                            <option value="binary">Binaria (S√≠/No)</option>
                            <option value="quantifiable">Cuantificable (Con progreso num√©rico)</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label for="editGoalCategory" class="form-label required">Categor√≠a</label>
                        <select class="form-select app-input" id="editGoalCategory" required>
                            <option value="">Seleccionar categor√≠a...</option>
                            <option value="personal">Personal</option>
                            <option value="professional">Profesional</option>
                            <option value="health">Salud</option>
                            <option value="financial">Financiero</option>
                            <option value="education">Educaci√≥n</option>
                            <option value="relationships">Relaciones</option>
                            <option value="hobby">Pasatiempos</option>
                            <option value="travel">Viajes</option>
                            <option value="other">Otros</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label for="editGoalPriority" class="form-label required">Prioridad</label>
                        <select class="form-select app-input" id="editGoalPriority" required>
                            <option value="">Seleccionar prioridad...</option>
                            <option value="baja">Baja</option>
                            <option value="media">Media</option>
                            <option value="alta">Alta</option>
                            <option value="urgente">Urgente</option>
                        </select>
                    </div>
                    
                    <div class="row">
                        <div class="col-6">
                            <label for="editGoalStartDate" class="form-label">Fecha de inicio</label>
                            <input type="date" class="form-control app-input" id="editGoalStartDate">
                        </div>
                        <div class="col-6">
                            <label for="editGoalDeadline" class="form-label required">Fecha l√≠mite</label>
                            <input type="date" class="form-control app-input" id="editGoalDeadline" required>
                        </div>
                    </div>
                    
                    <!-- Secci√≥n para metas cuantificables -->
                    <div id="editQuantifiableSection" style="display: none;">
                        <div class="row mt-3">
                            <div class="col-4">
                                <label for="editGoalCurrentValue" class="form-label">Valor actual</label>
                                <input type="number" class="form-control app-input" id="editGoalCurrentValue" 
                                       min="0" step="0.1">
                            </div>
                            <div class="col-4">
                                <label for="editGoalTargetValue" class="form-label">Objetivo</label>
                                <input type="number" class="form-control app-input" id="editGoalTargetValue" 
                                       min="0.1" step="0.1">
                            </div>
                            <div class="col-4">
                                <label for="editGoalUnit" class="form-label">Unidad</label>
                                <input type="text" class="form-control app-input" id="editGoalUnit">
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-gradient" id="saveEditGoal">
                    <i class="fas fa-save me-1"></i>
                    Guardar Cambios
                </button>
            </div>
        </div>
    </div>
</div>


<!-- Module: Gimnasio -->
<div id="module-gym" class="module-content">
    <!-- Vista de estad√≠sticas r√°pidas -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card app-card shadow-sm">
                <div class="card-header card-header-primary">
                    <h5 class="mb-0">
                        <i class="fas fa-chart-line me-2"></i>
                        Resumen de Entrenamientos
                    </h5>
                </div>
                <div class="card-body">
                    <div id="quickGymStats">
                        <!-- Las estad√≠sticas r√°pidas se generar√°n aqu√≠ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Sidebar para agregar entrenamientos -->
        <div class="col-lg-4 col-md-5">
            <!-- Formulario de entrenamiento -->
            <div class="card app-card shadow-sm">
                <div class="card-header card-header-success">
                    <h5 class="mb-0">
                        <i class="fas fa-plus me-2"></i>
                        Nuevo Entrenamiento
                    </h5>
                </div>
                <div class="card-body">
                    <form id="workoutForm">
                        <div class="mb-3">
                            <label for="workoutName" class="form-label">Nombre del entrenamiento</label>
                            <input type="text" class="form-control app-input" id="workoutName" required 
                                   placeholder="Ej: Push Day, Piernas, etc.">
                        </div>
                        
                        <div class="row">
                            <div class="col-8">
                                <label for="workoutDate" class="form-label">Fecha</label>
                                <input type="date" class="form-control app-input" id="workoutDate">
                            </div>
                            <div class="col-4">
                                <label for="workoutDuration" class="form-label">Duraci√≥n (min)</label>
                                <input type="number" class="form-control app-input" id="workoutDuration" 
                                       min="1" value="60">
                            </div>
                        </div>
                        
                        <div class="mb-3 mt-3">
                            <label for="workoutNotes" class="form-label">Notas (opcional)</label>
                            <textarea class="form-control app-input" id="workoutNotes" rows="2" 
                                      placeholder="C√≥mo te sentiste, observaciones..."></textarea>
                        </div>
                        
                        <!-- Secci√≥n para agregar ejercicios -->
                        <div class="mb-3">
                            <label class="form-label">Agregar Ejercicios</label>
                            <div class="row">
                                <div class="col-8">
                                    <select class="form-select app-input" id="exerciseName">
                                        <option value="">Seleccionar ejercicio...</option>
                                        <optgroup label="Pecho">
                                            <option value="Press Banca" data-category="chest">Press Banca</option>
                                            <option value="Press Inclinado" data-category="chest">Press Inclinado</option>
                                            <option value="Press Declinado" data-category="chest">Press Declinado</option>
                                            <option value="Flexiones" data-category="chest">Flexiones</option>
                                            <option value="Aperturas" data-category="chest">Aperturas</option>
                                            <option value="Fondos" data-category="chest">Fondos</option>
                                        </optgroup>
                                        <optgroup label="Espalda">
                                            <option value="Dominadas" data-category="back">Dominadas</option>
                                            <option value="Remo con Barra" data-category="back">Remo con Barra</option>
                                            <option value="Jalones" data-category="back">Jalones</option>
                                            <option value="Remo con Mancuerna" data-category="back">Remo con Mancuerna</option>
                                            <option value="Peso Muerto" data-category="back">Peso Muerto</option>
                                            <option value="Pullover" data-category="back">Pullover</option>
                                        </optgroup>
                                        <optgroup label="Hombros">
                                            <option value="Press Militar" data-category="shoulders">Press Militar</option>
                                            <option value="Press con Mancuernas" data-category="shoulders">Press con Mancuernas</option>
                                            <option value="Elevaciones Laterales" data-category="shoulders">Elevaciones Laterales</option>
                                            <option value="Elevaciones Frontales" data-category="shoulders">Elevaciones Frontales</option>
                                            <option value="P√°jaros" data-category="shoulders">P√°jaros</option>
                                            <option value="Encogimientos" data-category="shoulders">Encogimientos</option>
                                        </optgroup>
                                        <optgroup label="Brazos">
                                            <option value="Curl B√≠ceps" data-category="arms">Curl B√≠ceps</option>
                                            <option value="Curl Martillo" data-category="arms">Curl Martillo</option>
                                            <option value="Press Franc√©s" data-category="arms">Press Franc√©s</option>
                                            <option value="Extensiones" data-category="arms">Extensiones</option>
                                            <option value="Curl con Barra" data-category="arms">Curl con Barra</option>
                                            <option value="Dips" data-category="arms">Dips</option>
                                        </optgroup>
                                        <optgroup label="Piernas">
                                            <option value="Sentadillas" data-category="legs">Sentadillas</option>
                                            <option value="Peso Muerto" data-category="legs">Peso Muerto</option>
                                            <option value="Prensa" data-category="legs">Prensa</option>
                                            <option value="Estocadas" data-category="legs">Estocadas</option>
                                            <option value="Curl Femoral" data-category="legs">Curl Femoral</option>
                                            <option value="Extensiones de Cu√°driceps" data-category="legs">Extensiones de Cu√°driceps</option>
                                        </optgroup>
                                        <optgroup label="Core">
                                            <option value="Plancha" data-category="core">Plancha</option>
                                            <option value="Abdominales" data-category="core">Abdominales</option>
                                            <option value="Russian Twists" data-category="core">Russian Twists</option>
                                            <option value="Mountain Climbers" data-category="core">Mountain Climbers</option>
                                            <option value="Elevaciones de Piernas" data-category="core">Elevaciones de Piernas</option>
                                            <option value="Dead Bug" data-category="core">Dead Bug</option>
                                        </optgroup>
                                    </select>
                                    <input type="hidden" id="exerciseCategory">
                                </div>
                                <div class="col-4">
                                    <button type="button" class="btn btn-primary w-100" id="addExerciseToWorkout">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Lista de ejercicios agregados -->
                        <div class="mb-3">
                            <div id="workoutExercises">
                                <!-- Los ejercicios se agregar√°n aqu√≠ din√°micamente -->
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-gradient w-100">
                            <i class="fas fa-save me-2"></i>
                            Guardar Entrenamiento
                        </button>
                    </form>
                </div>
            </div>

            <!-- Formulario de peso corporal -->
            <div class="card app-card shadow-sm mt-3">
                <div class="card-header card-header-info">
                    <h6 class="mb-0">
                        <i class="fas fa-weight me-2"></i>
                        Registrar Peso Corporal
                    </h6>
                </div>
                <div class="card-body">
                    <form id="bodyWeightForm">
                        <div class="row">
                            <div class="col-6">
                                <label for="bodyWeight" class="form-label">Peso (kg)</label>
                                <input type="number" class="form-control app-input" id="bodyWeight" 
                                       min="20" max="300" step="0.1" required>
                            </div>
                            <div class="col-6">
                                <label for="weightDate" class="form-label">Fecha</label>
                                <input type="date" class="form-control app-input" id="weightDate">
                            </div>
                        </div>
                        <div class="mb-3 mt-2">
                            <label for="weightNotes" class="form-label">Notas</label>
                            <input type="text" class="form-control app-input" id="weightNotes" 
                                   placeholder="Ej: En ayunas, despu√©s de entrenar...">
                        </div>
                        <button type="submit" class="btn btn-outline-primary w-100">
                            <i class="fas fa-plus me-1"></i>
                            Registrar Peso
                        </button>
                    </form>
                </div>
            </div>

            <!-- Gr√°fico de peso corporal -->
            <div class="card app-card shadow-sm mt-3">
                <div class="card-body">
                    <div id="weightProgressChart">
                        <!-- El gr√°fico se generar√° aqu√≠ -->
                    </div>
                </div>
            </div>

            <!-- Filtros -->
            <div class="card app-card shadow-sm mt-3">
                <div class="card-header card-header-warning">
                    <h6 class="mb-0">
                        <i class="fas fa-filter me-2"></i>
                        Filtros
                    </h6>
                </div>
                <div class="card-body">
                    <div class="mb-2">
                        <select class="form-select form-select-sm app-input" id="filterMuscleGroup">
                            <option value="">Todos los grupos</option>
                            <option value="chest">Pecho</option>
                            <option value="back">Espalda</option>
                            <option value="shoulders">Hombros</option>
                            <option value="arms">Brazos</option>
                            <option value="legs">Piernas</option>
                            <option value="core">Core</option>
                        </select>
                    </div>
                    <div class="mb-2">
                        <select class="form-select form-select-sm app-input" id="filterWorkoutType">
                            <option value="">Todos los tipos</option>
                            <option value="compound">Compuestos</option>
                            <option value="isolation">Aislamiento</option>
                            <option value="bodyweight">Peso corporal</option>
                        </select>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="filterArchivedWorkouts">
                        <label class="form-check-label" for="filterArchivedWorkouts">
                            Mostrar archivados
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lista de entrenamientos -->
        <div class="col-lg-8 col-md-7">
            <div class="card app-card shadow-sm">
                <div class="card-header card-header-warning">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">
                            <i class="fas fa-dumbbell me-2"></i>
                            Historial de Entrenamientos
                        </h5>
                        <div class="d-flex gap-2">
                            <button class="btn btn-sm btn-secondary" id="clearOldWorkouts">
                                <i class="fas fa-broom me-1"></i>
                                <span class="d-none d-sm-inline">Limpiar antiguos</span>
                            </button>
                            <button class="btn btn-sm btn-info" id="exportWorkouts">
                                <i class="fas fa-download me-1"></i>
                                <span class="d-none d-sm-inline">Exportar</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="card-body">
                    <div id="gymStats" class="alert app-alert border mb-3">
                        <div class="row text-center">
                            <div class="col-3">
                                <div class="stat-number" id="totalWorkouts">0</div>
                                <div class="stat-label">Total</div>
                            </div>
                            <div class="col-3">
                                <div class="stat-number text-success" id="workoutsThisWeek">0</div>
                                <div class="stat-label">Esta Semana</div>
                            </div>
                            <div class="col-3">
                                <div class="stat-number text-warning" id="workoutsThisMonth">0</div>
                                <div class="stat-label">Este Mes</div>
                            </div>
                            <div class="col-3">
                                <div class="stat-number text-info" id="totalVolumeLifted">0</div>
                                <div class="stat-label">Volumen Total (kg)</div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="workoutsList" class="workouts-container">
                        <!-- Los entrenamientos se mostrar√°n aqu√≠ -->
                    </div>
                    
                    <div id="emptyGymState" class="text-center py-5 text-muted" style="display: none;">
                        <i class="fas fa-dumbbell fa-3x mb-3 text-primary"></i>
                        <h5>No hay entrenamientos registrados</h5>
                        <p>Registra tu primer entrenamiento para comenzar a trackear tu progreso</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal para editar entrenamiento -->
<div class="modal fade" id="editWorkoutModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content app-modal">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="fas fa-edit me-2"></i>
                    Editar Entrenamiento
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="editWorkoutForm">
                    <input type="hidden" id="editWorkoutId">
                    <div class="mb-3">
                        <label for="editWorkoutName" class="form-label">Nombre</label>
                        <input type="text" class="form-control app-input" id="editWorkoutName" required>
                    </div>
                    <div class="row">
                        <div class="col-8">
                            <label for="editWorkoutDate" class="form-label">Fecha</label>
                            <input type="date" class="form-control app-input" id="editWorkoutDate">
                        </div>
                        <div class="col-4">
                            <label for="editWorkoutDuration" class="form-label">Duraci√≥n (min)</label>
                            <input type="number" class="form-control app-input" id="editWorkoutDuration" min="1">
                        </div>
                    </div>
                    <div class="mb-3 mt-3">
                        <label for="editWorkoutNotes" class="form-label">Notas</label>
                        <textarea class="form-control app-input" id="editWorkoutNotes" rows="2"></textarea>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Ejercicios</label>
                        <div id="editWorkoutExercises">
                            <!-- Los ejercicios se cargar√°n aqu√≠ -->
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-gradient" id="saveEditWorkout">
                    <i class="fas fa-save me-1"></i>
                    Guardar Cambios
                </button>
            </div>
        </div>
    </div>
</div>

            <div id="module-dashboard" class="module-content">
                <div class="text-center py-5">
                    <i class="fas fa-chart-line fa-4x text-muted mb-3"></i>
                    <h3>Dashboard</h3>
                    <p class="text-muted">Pr√≥ximamente disponible</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Sidebar Overlay para m√≥vil -->
    <div class="sidebar-overlay" id="sidebar-overlay"></div>

    <!-- Modal para editar tarea -->
    <div class="modal fade" id="editTaskModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content app-modal">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-edit me-2"></i>
                        Editar Tarea
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="editTaskForm">
                        <input type="hidden" id="editTaskId">
                        <div class="mb-3">
                            <label for="editTaskTitle" class="form-label">T√≠tulo</label>
                            <input type="text" class="form-control app-input" id="editTaskTitle" required>
                        </div>
                        <div class="mb-3">
                            <label for="editTaskDescription" class="form-label">Descripci√≥n</label>
                            <textarea class="form-control app-input" id="editTaskDescription" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="editTaskType" class="form-label">Tipo</label>
                            <select class="form-select app-input" id="editTaskType">
                                <option value="pendiente">Pendiente (1 mes)</option>
                                <option value="recordatorio">Recordatorio</option>
                                <option value="checklist">Lista de tareas</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="editTaskCategory" class="form-label">Categor√≠a</label>
                            <select class="form-select app-input" id="editTaskCategory">
                                <option value="personal">Personal</option>
                                <option value="trabajo">Trabajo</option>
                                <option value="compras">Compras</option>
                                <option value="comida">Comida/Mercado</option>
                                <option value="pagos">Pagos</option>
                                <option value="citas">Citas/Recordatorios</option>
                                <option value="otros">Otros</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="editTaskPriority" class="form-label">Prioridad</label>
                            <select class="form-select app-input" id="editTaskPriority">
                                <option value="baja">Baja</option>
                                <option value="media">Media</option>
                                <option value="alta">Alta</option>
                                <option value="urgente">Urgente</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="editTaskDate" class="form-label">Fecha</label>
                            <input type="date" class="form-control app-input" id="editTaskDate">
                        </div>
                        <div class="mb-3">
                            <label for="editTaskTime" class="form-label">Hora</label>
                            <input type="time" class="form-control app-input" id="editTaskTime">
                        </div>
                        <div id="editChecklistSection" style="display: none;">
                            <div class="mb-3">
                                <label class="form-label">Items de la lista</label>
                                <div id="editChecklistItems">
                                    <!-- Los items se cargar√°n aqui -->
                                </div>
                                <button type="button" class="btn btn-sm btn-primary" onclick="agenda.addEditChecklistItem()">
                                    <i class="fas fa-plus me-1"></i>
                                    Agregar Item
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-gradient" id="saveEditTask">
                        <i class="fas fa-save me-1"></i>
                        Guardar Cambios
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container position-fixed top-0 end-0 p-3" id="toast-container">
        <!-- Toasts se generar√°n aqu√≠ -->
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="js/themes.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/modules/agenda.js"></script>
    <script src="js/modules/habits.js"></script>
    <script src="js/modules/gym.js"></script>
    <script src="js/modules/goals.js"></script>
    <script src="js/app.js"></script>
    
    <!-- PWA Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then((registration) => {
                        console.log('SW registrado con √©xito: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('SW fall√≥ al registrarse: ', registrationError);
                    });
            });
        }

        // PWA Install Button
        let deferredPrompt;
        const installButton = document.getElementById('install-button');

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installButton.style.display = 'block';
        });

        installButton.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                console.log(`User response to the install prompt: ${outcome}`);
                deferredPrompt = null;
                installButton.style.display = 'none';
            }
        });
    </script>
</body>
</html>