<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Agenda Personal Pro</title>
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#334155">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Agenda Pro">
    
    <!-- iOS Icons -->
    <link rel="apple-touch-icon" href="assets/icons/icon-180.png">
    <link rel="apple-touch-icon" sizes="152x152" href="assets/icons/icon-152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/icon-180.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/icons/favicon-16x16.png">
    
    <!-- CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="css/base.css" rel="stylesheet">
    <link href="css/habits.css" rel="stylesheet">
    <link id="theme-css" href="css/themes/masculine.css" rel="stylesheet">
    <link href="css/responsive.css" rel="stylesheet">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h3>Cargando Agenda...</h3>
            <p>Preparando tu espacio de productividad</p>
        </div>
    </div>

    <div class="app-container" id="app-container" style="display: none;">
        <!-- Header Principal -->
        <header class="app-header gradient-header text-white py-3">
            <div class="container-fluid">
                <div class="row align-items-center">
                    <div class="col-auto d-lg-none">
                        <button class="btn btn-link text-white p-0" id="mobile-menu-toggle">
                            <i class="fas fa-bars fa-lg"></i>
                        </button>
                    </div>
                    <div class="col text-center col-lg-auto text-lg-start">
                        <h1 class="mb-0">
                            <i class="fas fa-calendar-alt me-2"></i>
                            <span class="d-none d-sm-inline">Agenda Personal Pro</span>
                            <span class="d-inline d-sm-none">Agenda Pro</span>
                        </h1>
                    </div>
                    <div class="col-auto">
                        <!-- Theme Selector -->
                        <div class="dropdown">
                            <button class="btn btn-outline-light btn-sm dropdown-toggle" type="button" id="themeDropdown" data-bs-toggle="dropdown">
                                <i class="fas fa-palette me-1"></i>
                                <span class="d-none d-sm-inline">Tema</span>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li>
                                    <a class="dropdown-item" href="#" onclick="ThemeManager.switch('masculine')">
                                        <i class="fas fa-briefcase me-2"></i>Profesional
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="#" onclick="ThemeManager.switch('feminine')">
                                        <i class="fas fa-heart me-2"></i>Elegante
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation Sidebar -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-content">
                <ul class="nav nav-pills flex-column">
                    <li class="nav-item">
                        <a class="nav-link active" href="#" data-module="agenda">
                            <i class="fas fa-calendar-check me-2"></i>
                            <span>Agenda</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" href="#" data-module="habits">
                            <i class="fas fa-repeat me-2"></i>
                            <span>H√°bitos</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" href="#" data-module="goals">
                            <i class="fas fa-bullseye me-2"></i>
                            <span>Metas</span>
                            <small class="badge bg-secondary ms-auto">Pr√≥ximamente</small>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" href="#" data-module="gym">
                            <i class="fas fa-dumbbell me-2"></i>
                            <span>Gimnasio</span>
                            <small class="badge bg-secondary ms-auto">Pr√≥ximamente</small>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" href="#" data-module="dashboard">
                            <i class="fas fa-chart-line me-2"></i>
                            <span>Dashboard</span>
                            <small class="badge bg-secondary ms-auto">Pr√≥ximamente</small>
                        </a>
                    </li>
                </ul>

                <!-- Sidebar Footer -->
                <div class="sidebar-footer mt-auto pt-3">
                    <div class="text-center">
                        <button class="btn btn-outline-primary btn-sm w-100 mb-2" id="install-button" style="display: none;">
                            <i class="fas fa-download me-1"></i>Instalar App
                        </button>
                        <small class="text-muted d-block">
                            <i class="fas fa-shield-alt me-1"></i>
                            Datos seguros en tu dispositivo
                        </small>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Module: Agenda -->
            <div id="module-agenda" class="module-content active">
                <!-- Vista de calendario de 3 d√≠as -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="card app-card shadow-sm">
                            <div class="card-header card-header-primary">
                                <h5 class="mb-0">
                                    <i class="fas fa-calendar-week me-2"></i>
                                    Pr√≥ximos 3 D√≠as
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="row" id="threeDayView">
                                    <!-- Los pr√≥ximos 3 d√≠as se generar√°n aqu√≠ -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <!-- Sidebar para agregar tareas -->
                    <div class="col-lg-4 col-md-5">
                        <div class="card app-card shadow-sm">
                            <div class="card-header card-header-success">
                                <h5 class="mb-0">
                                    <i class="fas fa-plus me-2"></i>
                                    Agregar Nueva Tarea
                                </h5>
                            </div>
                            <div class="card-body">
                                <form id="taskForm">
                                    <div class="mb-3">
                                        <label for="taskTitle" class="form-label">T√≠tulo de la tarea</label>
                                        <input type="text" class="form-control app-input" id="taskTitle" required>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="taskDescription" class="form-label">Descripci√≥n</label>
                                        <textarea class="form-control app-input" id="taskDescription" rows="3"></textarea>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="taskType" class="form-label">Tipo</label>
                                        <select class="form-select app-input" id="taskType">
                                            <option value="pendiente">Pendiente (1 mes)</option>
                                            <option value="recordatorio">Recordatorio</option>
                                            <option value="checklist">Lista de tareas</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="taskCategory" class="form-label">Categor√≠a</label>
                                        <select class="form-select app-input" id="taskCategory">
                                            <option value="personal">Personal</option>
                                            <option value="trabajo">Trabajo</option>
                                            <option value="compras">Compras</option>
                                            <option value="comida">Comida/Mercado</option>
                                            <option value="pagos">Pagos</option>
                                            <option value="citas">Citas/Recordatorios</option>
                                            <option value="otros">Otros</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="taskPriority" class="form-label">Prioridad</label>
                                        <select class="form-select app-input" id="taskPriority">
                                            <option value="baja">Baja</option>
                                            <option value="media" selected>Media</option>
                                            <option value="alta">Alta</option>
                                            <option value="urgente">Urgente</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="taskDate" class="form-label">Fecha</label>
                                        <input type="date" class="form-control app-input" id="taskDate">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="taskTime" class="form-label">Hora (opcional)</label>
                                        <input type="time" class="form-control app-input" id="taskTime">
                                    </div>

                                    <!-- Secci√≥n para Checklist Items -->
                                    <div id="checklistSection" style="display: none;">
                                        <div class="mb-3">
                                            <label class="form-label">Items de la lista</label>
                                            <div id="checklistItems">
                                                <div class="input-group mb-2">
                                                    <input type="text" class="form-control app-input" placeholder="Agregar item...">
                                                    <button type="button" class="btn btn-primary" onclick="agenda.addChecklistItem(this)">
                                                        <i class="fas fa-plus"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <button type="submit" class="btn btn-gradient w-100">
                                        <i class="fas fa-save me-2"></i>
                                        Guardar Tarea
                                    </button>
                                </form>
                            </div>
                        </div>

                        <!-- Filtros -->
                        <div class="card app-card shadow-sm mt-3">
                            <div class="card-header card-header-info">
                                <h6 class="mb-0">
                                    <i class="fas fa-filter me-2"></i>
                                    Filtros
                                </h6>
                            </div>
                            <div class="card-body">
                                <div class="mb-2">
                                    <select class="form-select form-select-sm app-input" id="filterType">
                                        <option value="">Todos los tipos</option>
                                        <option value="pendiente">Pendientes</option>
                                        <option value="recordatorio">Recordatorios</option>
                                        <option value="checklist">Listas</option>
                                    </select>
                                </div>
                                <div class="mb-2">
                                    <select class="form-select form-select-sm app-input" id="filterCategory">
                                        <option value="">Todas las categor√≠as</option>
                                        <option value="personal">Personal</option>
                                        <option value="trabajo">Trabajo</option>
                                        <option value="compras">Compras</option>
                                        <option value="comida">Comida/Mercado</option>
                                        <option value="pagos">Pagos</option>
                                        <option value="citas">Citas/Recordatorios</option>
                                        <option value="otros">Otros</option>
                                    </select>
                                </div>
                                <div class="mb-2">
                                    <select class="form-select form-select-sm app-input" id="filterPriority">
                                        <option value="">Todas las prioridades</option>
                                        <option value="urgente">Urgente</option>
                                        <option value="alta">Alta</option>
                                        <option value="media">Media</option>
                                        <option value="baja">Baja</option>
                                    </select>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="filterCompleted">
                                    <label class="form-check-label" for="filterCompleted">
                                        Mostrar completadas
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Lista de tareas con pesta√±as -->
                    <div class="col-lg-8 col-md-7">
                        <div class="card app-card shadow-sm">
                            <div class="card-header card-header-warning">
                                <ul class="nav nav-tabs card-header-tabs" id="taskTabs" role="tablist">
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link active app-tab" id="all-tab" data-bs-toggle="tab" data-bs-target="#all-tasks" type="button" role="tab">
                                            <i class="fas fa-list me-1"></i>
                                            <span class="d-none d-sm-inline">Todas</span>
                                        </button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link app-tab" id="pending-tab" data-bs-toggle="tab" data-bs-target="#pending-tasks" type="button" role="tab">
                                            <i class="fas fa-clock me-1"></i>
                                            <span class="d-none d-sm-inline">Pendientes</span>
                                        </button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link app-tab" id="checklist-tab" data-bs-toggle="tab" data-bs-target="#checklist-tasks" type="button" role="tab">
                                            <i class="fas fa-check-square me-1"></i>
                                            <span class="d-none d-sm-inline">Listas</span>
                                        </button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link app-tab" id="reminders-tab" data-bs-toggle="tab" data-bs-target="#reminder-tasks" type="button" role="tab">
                                            <i class="fas fa-bell me-1"></i>
                                            <span class="d-none d-sm-inline">Recordatorios</span>
                                        </button>
                                    </li>
                                </ul>
                                <div class="mt-2 d-flex justify-content-end flex-wrap gap-2">
                                    <button class="btn btn-sm btn-secondary" id="exportToGoogle">
                                        <i class="fab fa-google me-1"></i>
                                        <span class="d-none d-sm-inline">Exportar a Google</span>
                                    </button>
                                    <button class="btn btn-sm btn-danger" id="clearCompleted">
                                        <i class="fas fa-trash me-1"></i>
                                        <span class="d-none d-sm-inline">Limpiar completadas</span>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="card-body">
                                <div id="taskStats" class="alert app-alert border mb-3">
                                    <div class="row text-center">
                                        <div class="col-3">
                                            <div class="stat-number" id="totalTasks">0</div>
                                            <div class="stat-label">Total</div>
                                        </div>
                                        <div class="col-3">
                                            <div class="stat-number text-success" id="completedTasks">0</div>
                                            <div class="stat-label">Completadas</div>
                                        </div>
                                        <div class="col-3">
                                            <div class="stat-number text-warning" id="pendingTasks">0</div>
                                            <div class="stat-label">Pendientes</div>
                                        </div>
                                        <div class="col-3">
                                            <div class="stat-number text-danger" id="urgentTasks">0</div>
                                            <div class="stat-label">Urgentes</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="tab-content" id="taskTabContent">
                                    <div class="tab-pane fade show active" id="all-tasks" role="tabpanel">
                                        <div id="taskList" class="task-container">
                                            <!-- Todas las tareas se mostrar√°n aqu√≠ -->
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="pending-tasks" role="tabpanel">
                                        <div id="pendingList" class="task-container">
                                            <!-- Pendientes se mostrar√°n aqu√≠ -->
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="checklist-tasks" role="tabpanel">
                                        <div id="checklistList" class="task-container">
                                            <!-- Listas se mostrar√°n aqu√≠ -->
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="reminder-tasks" role="tabpanel">
                                        <div id="reminderList" class="task-container">
                                            <!-- Recordatorios se mostrar√°n aqu√≠ -->
                                        </div>
                                    </div>
                                </div>
                                
                                <div id="emptyState" class="text-center py-5 text-muted" style="display: none;">
                                    <i class="fas fa-tasks fa-3x mb-3 text-primary"></i>
                                    <h5>No hay tareas a√∫n</h5>
                                    <p>Agrega tu primera tarea para comenzar</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

<!-- Module: H√°bitos -->
<div id="module-habits" class="module-content">
    <!-- Vista de progreso de hoy -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card app-card shadow-sm">
                <div class="card-header card-header-primary">
                    <h5 class="mb-0">
                        <i class="fas fa-calendar-day me-2"></i>
                        Progreso de Hoy
                    </h5>
                </div>
                <div class="card-body">
                    <div id="todayHabitsProgress">
                        <!-- El progreso de hoy se generar√° aqu√≠ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Sidebar para agregar h√°bitos -->
        <div class="col-lg-4 col-md-5">
            <div class="card app-card shadow-sm">
                <div class="card-header card-header-success">
                    <h5 class="mb-0">
                        <i class="fas fa-plus me-2"></i>
                        Crear Nuevo H√°bito
                    </h5>
                </div>
                <div class="card-body">
                    <form id="habitForm">
                        <div class="mb-3">
                            <label for="habitName" class="form-label">Nombre del h√°bito</label>
                            <input type="text" class="form-control app-input" id="habitName" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="habitDescription" class="form-label">Descripci√≥n</label>
                            <textarea class="form-control app-input" id="habitDescription" rows="2"></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label for="habitCategory" class="form-label">Categor√≠a</label>
                            <select class="form-select app-input" id="habitCategory">
                                <option value="health">Salud</option>
                                <option value="fitness">Fitness</option>
                                <option value="productivity">Productividad</option>
                                <option value="learning">Aprendizaje</option>
                                <option value="social">Social</option>
                                <option value="spiritual">Espiritual</option>
                                <option value="creative">Creativo</option>
                                <option value="financial">Financiero</option>
                                <option value="other">Otro</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label for="habitDifficulty" class="form-label">Dificultad</label>
                            <select class="form-select app-input" id="habitDifficulty">
                                <option value="easy">F√°cil</option>
                                <option value="medium" selected>Medio</option>
                                <option value="hard">Dif√≠cil</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label for="habitFrequency" class="form-label">Frecuencia</label>
                            <select class="form-select app-input" id="habitFrequency">
                                <option value="daily" selected>Diario</option>
                                <option value="weekly">Semanal</option>
                                <option value="workdays">D√≠as laborales</option>
                                <option value="weekends">Fines de semana</option>
                            </select>
                        </div>
                        
                        <div class="row">
                            <div class="col-8">
                                <label for="habitTargetValue" class="form-label">Meta diaria</label>
                                <input type="number" class="form-control app-input" id="habitTargetValue" min="1" value="1">
                            </div>
                            <div class="col-4">
                                <label for="habitUnit" class="form-label">Unidad</label>
                                <input type="text" class="form-control app-input" id="habitUnit" value="veces">
                            </div>
                        </div>
                        
                        <div class="row mt-3">
                            <div class="col-6">
                                <label for="habitIcon" class="form-label">√çcono</label>
                                <select class="form-select app-input" id="habitIcon">
                                    <option value="fas fa-star">‚≠ê Estrella</option>
                                    <option value="fas fa-heart">‚ù§Ô∏è Coraz√≥n</option>
                                    <option value="fas fa-fire">üî• Fuego</option>
                                    <option value="fas fa-dumbbell">üèãÔ∏è Ejercicio</option>
                                    <option value="fas fa-book">üìö Lectura</option>
                                    <option value="fas fa-glass-water">üíß Agua</option>
                                    <option value="fas fa-bed">üõèÔ∏è Dormir</option>
                                    <option value="fas fa-utensils">üçΩÔ∏è Comida</option>
                                    <option value="fas fa-brain">üß† Mental</option>
                                    <option value="fas fa-leaf">üå± Naturaleza</option>
                                </select>
                            </div>
                            <div class="col-6">
                                <label for="habitColor" class="form-label">Color</label>
                                <input type="color" class="form-control app-input" id="habitColor" value="#60a5fa">
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-gradient w-100 mt-3">
                            <i class="fas fa-save me-2"></i>
                            Crear H√°bito
                        </button>
                    </form>
                </div>
            </div>

            <!-- Filtros -->
            <div class="card app-card shadow-sm mt-3">
                <div class="card-header card-header-info">
                    <h6 class="mb-0">
                        <i class="fas fa-filter me-2"></i>
                        Filtros
                    </h6>
                </div>
                <div class="card-body">
                    <div class="mb-2">
                        <select class="form-select form-select-sm app-input" id="filterHabitCategory">
                            <option value="">Todas las categor√≠as</option>
                            <option value="health">Salud</option>
                            <option value="fitness">Fitness</option>
                            <option value="productivity">Productividad</option>
                            <option value="learning">Aprendizaje</option>
                            <option value="social">Social</option>
                            <option value="spiritual">Espiritual</option>
                            <option value="creative">Creativo</option>
                            <option value="financial">Financiero</option>
                            <option value="other">Otro</option>
                        </select>
                    </div>
                    <div class="mb-2">
                        <select class="form-select form-select-sm app-input" id="filterHabitDifficulty">
                            <option value="">Todas las dificultades</option>
                            <option value="easy">F√°cil</option>
                            <option value="medium">Medio</option>
                            <option value="hard">Dif√≠cil</option>
                        </select>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="filterArchivedHabits">
                        <label class="form-check-label" for="filterArchivedHabits">
                            Mostrar archivados
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lista de h√°bitos -->
        <div class="col-lg-8 col-md-7">
            <div class="card app-card shadow-sm">
                <div class="card-header card-header-warning">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">
                            <i class="fas fa-list me-2"></i>
                            Mis H√°bitos
                        </h5>
                        <div class="d-flex gap-2">
                            <button class="btn btn-sm btn-secondary" id="archiveCompletedHabits">
                                <i class="fas fa-archive me-1"></i>
                                <span class="d-none d-sm-inline">Archivar completados</span>
                            </button>
                            <button class="btn btn-sm btn-info" id="exportHabits">
                                <i class="fas fa-download me-1"></i>
                                <span class="d-none d-sm-inline">Exportar</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="card-body">
                    <div id="habitStats" class="alert app-alert border mb-3">
                        <div class="row text-center">
                            <div class="col-3">
                                <div class="stat-number" id="totalHabits">0</div>
                                <div class="stat-label">Total</div>
                            </div>
                            <div class="col-3">
                                <div class="stat-number text-success" id="todayCompletedHabits">0</div>
                                <div class="stat-label">Hoy Completados</div>
                            </div>
                            <div class="col-3">
                                <div class="stat-number text-warning" id="todayPendingHabits">0</div>
                                <div class="stat-label">Pendientes</div>
                            </div>
                            <div class="col-3">
                                <div class="stat-number text-info" id="averageStreak">0</div>
                                <div class="stat-label">Racha Promedio</div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="habitsList" class="habits-container">
                        <!-- Los h√°bitos se mostrar√°n aqu√≠ -->
                    </div>
                    
                    <div id="emptyHabitsState" class="text-center py-5 text-muted" style="display: none;">
                        <i class="fas fa-repeat fa-3x mb-3 text-primary"></i>
                        <h5>No hay h√°bitos a√∫n</h5>
                        <p>Crea tu primer h√°bito para comenzar a construir una rutina positiva</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal para editar h√°bito -->
<div class="modal fade" id="editHabitModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content app-modal">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="fas fa-edit me-2"></i>
                    Editar H√°bito
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="editHabitForm">
                    <input type="hidden" id="editHabitId">
                    <div class="mb-3">
                        <label for="editHabitName" class="form-label">Nombre</label>
                        <input type="text" class="form-control app-input" id="editHabitName" required>
                    </div>
                    <div class="mb-3">
                        <label for="editHabitDescription" class="form-label">Descripci√≥n</label>
                        <textarea class="form-control app-input" id="editHabitDescription" rows="2"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="editHabitCategory" class="form-label">Categor√≠a</label>
                        <select class="form-select app-input" id="editHabitCategory">
                            <option value="health">Salud</option>
                            <option value="fitness">Fitness</option>
                            <option value="productivity">Productividad</option>
                            <option value="learning">Aprendizaje</option>
                            <option value="social">Social</option>
                            <option value="spiritual">Espiritual</option>
                            <option value="creative">Creativo</option>
                            <option value="financial">Financiero</option>
                            <option value="other">Otro</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="editHabitDifficulty" class="form-label">Dificultad</label>
                        <select class="form-select app-input" id="editHabitDifficulty">
                            <option value="easy">F√°cil</option>
                            <option value="medium">Medio</option>
                            <option value="hard">Dif√≠cil</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="editHabitFrequency" class="form-label">Frecuencia</label>
                        <select class="form-select app-input" id="editHabitFrequency">
                            <option value="daily">Diario</option>
                            <option value="weekly">Semanal</option>
                            <option value="workdays">D√≠as laborales</option>
                            <option value="weekends">Fines de semana</option>
                        </select>
                    </div>
                    <div class="row">
                        <div class="col-8">
                            <label for="editHabitTargetValue" class="form-label">Meta diaria</label>
                            <input type="number" class="form-control app-input" id="editHabitTargetValue" min="1">
                        </div>
                        <div class="col-4">
                            <label for="editHabitUnit" class="form-label">Unidad</label>
                            <input type="text" class="form-control app-input" id="editHabitUnit">
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-6">
                            <label for="editHabitIcon" class="form-label">√çcono</label>
                            <select class="form-select app-input" id="editHabitIcon">
                                <option value="fas fa-star">‚≠ê Estrella</option>
                                <option value="fas fa-heart">‚ù§Ô∏è Coraz√≥n</option>
                                <option value="fas fa-fire">üî• Fuego</option>
                                <option value="fas fa-dumbbell">üèãÔ∏è Ejercicio</option>
                                <option value="fas fa-book">üìö Lectura</option>
                                <option value="fas fa-glass-water">üíß Agua</option>
                                <option value="fas fa-bed">üõèÔ∏è Dormir</option>
                                <option value="fas fa-utensils">üçΩÔ∏è Comida</option>
                                <option value="fas fa-brain">üß† Mental</option>
                                <option value="fas fa-leaf">üå± Naturaleza</option>
                            </select>
                        </div>
                        <div class="col-6">
                            <label for="editHabitColor" class="form-label">Color</label>
                            <input type="color" class="form-control app-input" id="editHabitColor">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-gradient" id="saveEditHabit">
                    <i class="fas fa-save me-1"></i>
                    Guardar Cambios
                </button>
            </div>
        </div>
    </div>
</div>


             <!-- Modulo de Metas -->
            <div id="module-goals" class="module-content">
                <div class="text-center py-5">
                    <i class="fas fa-bullseye fa-4x text-muted mb-3"></i>
                    <h3>M√≥dulo de Metas</h3>
                    <p class="text-muted">Pr√≥ximamente disponible</p>
                </div>
            </div>
            <!-- Modulo de Gimnasio -->
            <div id="module-gym" class="module-content">
                <div class="text-center py-5">
                    <i class="fas fa-dumbbell fa-4x text-muted mb-3"></i>
                    <h3>M√≥dulo de Gimnasio</h3>
                    <p class="text-muted">Pr√≥ximamente disponible</p>
                </div>
            </div>

            <div id="module-dashboard" class="module-content">
                <div class="text-center py-5">
                    <i class="fas fa-chart-line fa-4x text-muted mb-3"></i>
                    <h3>Dashboard</h3>
                    <p class="text-muted">Pr√≥ximamente disponible</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Sidebar Overlay para m√≥vil -->
    <div class="sidebar-overlay" id="sidebar-overlay"></div>

    <!-- Modal para editar tarea -->
    <div class="modal fade" id="editTaskModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content app-modal">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-edit me-2"></i>
                        Editar Tarea
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="editTaskForm">
                        <input type="hidden" id="editTaskId">
                        <div class="mb-3">
                            <label for="editTaskTitle" class="form-label">T√≠tulo</label>
                            <input type="text" class="form-control app-input" id="editTaskTitle" required>
                        </div>
                        <div class="mb-3">
                            <label for="editTaskDescription" class="form-label">Descripci√≥n</label>
                            <textarea class="form-control app-input" id="editTaskDescription" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="editTaskType" class="form-label">Tipo</label>
                            <select class="form-select app-input" id="editTaskType">
                                <option value="pendiente">Pendiente (1 mes)</option>
                                <option value="recordatorio">Recordatorio</option>
                                <option value="checklist">Lista de tareas</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="editTaskCategory" class="form-label">Categor√≠a</label>
                            <select class="form-select app-input" id="editTaskCategory">
                                <option value="personal">Personal</option>
                                <option value="trabajo">Trabajo</option>
                                <option value="compras">Compras</option>
                                <option value="comida">Comida/Mercado</option>
                                <option value="pagos">Pagos</option>
                                <option value="citas">Citas/Recordatorios</option>
                                <option value="otros">Otros</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="editTaskPriority" class="form-label">Prioridad</label>
                            <select class="form-select app-input" id="editTaskPriority">
                                <option value="baja">Baja</option>
                                <option value="media">Media</option>
                                <option value="alta">Alta</option>
                                <option value="urgente">Urgente</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="editTaskDate" class="form-label">Fecha</label>
                            <input type="date" class="form-control app-input" id="editTaskDate">
                        </div>
                        <div class="mb-3">
                            <label for="editTaskTime" class="form-label">Hora</label>
                            <input type="time" class="form-control app-input" id="editTaskTime">
                        </div>
                        <div id="editChecklistSection" style="display: none;">
                            <div class="mb-3">
                                <label class="form-label">Items de la lista</label>
                                <div id="editChecklistItems">
                                    <!-- Los items se cargar√°n aqui -->
                                </div>
                                <button type="button" class="btn btn-sm btn-primary" onclick="agenda.addEditChecklistItem()">
                                    <i class="fas fa-plus me-1"></i>
                                    Agregar Item
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-gradient" id="saveEditTask">
                        <i class="fas fa-save me-1"></i>
                        Guardar Cambios
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container position-fixed top-0 end-0 p-3" id="toast-container">
        <!-- Toasts se generar√°n aqu√≠ -->
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="js/themes.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/modules/agenda.js"></script>
    <script src="js/modules/habits.js"></script>
    <script src="js/app.js"></script>
    
    <!-- PWA Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then((registration) => {
                        console.log('SW registrado con √©xito: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('SW fall√≥ al registrarse: ', registrationError);
                    });
            });
        }

        // PWA Install Button
        let deferredPrompt;
        const installButton = document.getElementById('install-button');

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installButton.style.display = 'block';
        });

        installButton.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                console.log(`User response to the install prompt: ${outcome}`);
                deferredPrompt = null;
                installButton.style.display = 'none';
            }
        });
    </script>
</body>
</html>